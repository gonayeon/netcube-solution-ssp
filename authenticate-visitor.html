<!DOCTYPE html>
<html
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default-layout.html}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title th:text="#{page.title.authenticate.visitor}">[NPass Self Serviced Portal] Authenticate Visitor Page</title>

    <th:block layout:fragment="script">
        <script th:inline="javascript">
            const pageName = "AUTHENTICATE_VISITOR";
            const otpMethod = [[${otpMethod}]];
            const otpCodeValidTime = [[${otpCodeValidTime}]];
            const maximumAuthenticateFailCount = [[${maximumAuthenticateFailCount}]];
            const authenticateFailLockTimeSecond = [[${authenticateFailLockTimeSecond}]];
            const authenticateFailLockTimeMinute = authenticateFailLockTimeSecond / 60;
            const sectionId = (userAccessInfo.deviceType === deviceTypes.PC) ? '#pcSection' : '#mobileSection';
        </script>

        <script type="text/javascript" th:src="@{/js/authenticate/authenticate.js}"></script>
    </th:block>
</head>
<body>
    
    <header id="pc-header" class="fixed top-0 left-0 w-full h-[8.9vh] lg:h-20 bg-cornflower-blue-600 lg:bg-blue-ribbon-950">
        <!-- pc header -->
        <div class="hidden w-[95%] max-w-[1160px] mx-auto h-full lg:flex justify-between items-center">
            <h1 class="mr-24">
                <a href="index.html"><img src="/static/images/main/mainLogo.svg" class="w-32 h-auto" alt="NPass"></a>
            </h1>

            <nav class="grow">
                <ul class="flex gap-24">
                    <li>
                        <a class="nav-item group relative text-[22px] font-bold text-white" href="device.html">
                            <div class="group-hover:block hidden absolute top-0 -right-3 w-2 h-2 bg-white rounded-full"></div>
                            <span>Device</span>
                        </a>
                        <div class="menu-explain hidden absolute top-20 left-0 w-full h-[233px]" style="background: url(/static/images/banner/device-banner.png) no-repeat center/cover;">
                            <div class="w-[95%] max-w-[1160px] mx-auto mt-[68px] text-white pl-56">
                                <h2 class="text-[40px] tracking-[0.095em] font-bold">사용자 단말 관리</h2>
                                <p class="text-sm mt-2">등록된 단말을 관리 하실 수 있습니다.</p>
                            </div>
                        </div>
                    </li>

                    <li>
                        <a class="nav-item group relative text-[22px] font-bold text-white" href="/faq">
                            <div class="group-hover:block hidden absolute top-0 -right-3 w-2 h-2 bg-white rounded-full"></div>
                            <span th:text="#{pc.common.header.nav.faq}">FAQ</span>
                        </a>
                        <div class="menu-explain hidden absolute top-20 left-0 w-full h-[233px]" style="background: url(/static/images/banner/faq-banner.svg) no-repeat center/cover;">
                            <div class="w-[95%] max-w-[1160px] mx-auto mt-[68px] text-white pl-56">
                                <h2 class="text-[40px] tracking-[0.095em] font-bold" th:text="#{pc.common.header.banner.title.faq}">자주하는 질문</h2>
                                <p class="text-sm mt-2" th:text="#{pc.common.header.banner.message.faq}">자주하는 질문을 확인해보세요.</p>
                            </div>
                        </div>
                    </li>

                    <li>
                        <a class="nav-item group relative text-[22px] font-bold text-white" href="/notice">
                            <div class="group-hover:block hidden absolute top-0 -right-3 w-2 h-2 bg-white rounded-full"></div>
                            <span th:text="#{pc.common.header.nav.notice}">Notice</span>
                        </a>
                        <div class="menu-explain hidden absolute top-20 left-0 w-full h-[233px]" style="background: url(/static/images/banner/notice-banner.svg) no-repeat center/cover;">
                            <div class="w-[95%] max-w-[1160px] mx-auto mt-[68px] text-white pl-56">
                                <h2 class="text-[40px] tracking-[0.095em] font-bold" th:text="#{pc.common.header.banner.title.notice}">공지사항</h2>
                                <p class="text-sm mt-2" th:text="#{pc.common.header.banner.message.notice}">새로운 공지사항을 알려드립니다.</p>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>

            <form class="flex items-center gap-3 text-white text-sm">
                <button type="button" class="logout-btn border-b border-white hover:border-portage-400 hover:text-portage-400 transition-all-3ms-ease" sec:authorize="isAuthenticated()">
                    <a href="/logout" th:text="#{pc.common.header.logout}">로그아웃</a>
                </button>

                <button type="button" class="manualBtn hover:text-portage-400 transition-all-3ms-ease ml-3" th:text="#{pc.common.header.manual}">매뉴얼</button>

                <select class="w-24 pl-3 pr-7 bg-transparent *:text-black" style="background: url(/static/images/main/selectWhiteTriangle.png) no-repeat top 3px right 8px/16px" onchange="if(this.value) location.href=(this.value);">
                    <option value="?lang=ko" th:selected="${#locale.language == 'ko'}" th:text="#{pc.common.header.language.select.ko}">한국어</option>
                    <option value="?lang=en" th:selected="${#locale.language == 'en'}" th:text="#{pc.common.header.language.select.en}">English</option>
                </select>
            </form>
        </div>

        <!-- mobile header -->
        <div class="lg:hidden h-full flex items-center relative" id="mobileHeader">
            <button id="hamburger-button" type="button" class="h-[41.6%] mx-[4%] ">
                <img src="/static/images/main/hamburger-button.svg" class="w-auto h-full" alt="go to menu">
            </button>
            <h1 class="top-logo absolute top-1/2 left-[52%] -translate-x-1/2 -translate-y-1/2 text-[1.6rem] text-white font-bold text-nowrap">
                공지사항
            </h1>
        </div>
        
        <!-- mobile side -->
        <div id="sideMenuWrap" class="block lg:hidden fixed top-0 -left-full w-full h-screen z-10">
            <aside id="sideMenu" class="fixed top-0 -left-full z-10 flex flex-col justify-between w-[51%] min-w-52 max-w-[450px] h-full bg-white rounded-tr-3xl 
            rounded-br-3xl shadow-[1px_2px_4px_0_rgba(0,0,0,0.25)] overflow-hidden">
                <div class="h-[9%] min-h-[60px] px-[10%] border-b border-[#c1c7dc] flex items-center">
                    <h2 class="h-1/2">
                        <a href="/"><img src="/static/images/main/sidebar-logo.svg" class="w-auto h-full" alt="NPass"></a>
                    </h2>
                </div>

                <div class="flex justify-center items-center h-[12.7vh] min-h-20">
                    <form class="border border-cornflower-blue-300 flex justify-center items-center w-[90%] rounded-lg md:rounded-2xl overflow-hidden">
                        <label class="flex justify-center items-center w-1/2 text-boulder-500 text-[4vw] font-bold bg-white py-[0.5vh] transition-all duration-150 has-[:checked]:text-black has-[:checked]:bg-cornflower-blue-300">
                            <input type="radio" name="language" value="ko" class="appearance-none" checked>
                            <span>KOR</span>
                        </label>
                        <label class="flex justify-center items-center w-1/2 text-boulder-500 text-[4vw] font-bold bg-white py-[0.5vh] transition-all duration-150 has-[:checked]:text-black has-[:checked]:bg-cornflower-blue-300">
                            <input type="radio" name="language" value="en" class="appearance-none">
                            <span>ENG</span>
                        </label>
                    </form>
                </div>

                <ul class="grow *:mb-[2vh]">
                    <li>
                        <a class="block pl-[10%] pr-[9%] py-1 w-[90%] rounded-r-full text-2xl font-semibold hover:text-right hover:bg-black hover:text-white" href="device.html">Device</a>
                    </li>
                    <li>
                        <a class="block pl-[10%] pr-[9%] py-1 w-[90%] rounded-r-full text-2xl font-semibold hover:text-right hover:bg-black hover:text-white" href="faq-list.html">FAQ</a>
                    </li>
                    <li>
                        <a class="block pl-[10%] pr-[9%] py-1 w-[90%] rounded-r-full text-2xl font-semibold hover:text-right hover:bg-black hover:text-white" href="notice-list.html">NOTICE</a>
                    </li>
                </ul>

                <div class="border-t border-[#c1c7dc] flex justify-end items-center h-[9vh]">
                    <button type="button" class="w-fit h-full">
                        <img src="/static/images/headerFooter/manual-btn.png" class="w-auto h-full" alt="go to manual">
                    </button>

                    <button type="button" class="w-fit h-full">
                        <img src="/static/images/headerFooter/logout-btn.png" class="w-auto h-full" alt="logout">
                    </button>
                </div>
            </aside>
        </div>
    </header>

    <footer id="pc-footer" class="hidden lg:block fixed bottom-0 left-0 w-full h-[100px] bg-white">
        <div class="w-[95%] max-w-[1160px] mx-auto h-full flex justify-between items-center">
            <div class="text-boulder-400">
                <ul class="flex mb-1 *:after:content-['&#124;'] *:after:mx-[0.625rem] *:after:font-normal *:after:text-boulder-400">
                    <li class="text-boulder-500 font-semibold">
                        <a href="#">개인정보 처리방침</a>
                    </li>
                    <li>
                        <span>&#40;주&#41;넷큐브</span>
                    </li>
                    <li class="last:after:content-none">
                        <span>All Rights Reserved.</span>
                    </li>
                </ul>
                <ul class="flex *:after:content-['&#124;'] *:after:mx-[0.625rem]">
                    <li>
                        <span>대표이사 유동호</span>
                    </li>
                    <li class="last:after:content-none">
                        <span>&#40;우&#41; 08215 서울 구로구 경인로53길 90 STX-W타워 714호</span>
                    </li>
                </ul>
            </div>
    
            <a href="/" class="h-2/5"><img class="w-auto h-full" alt="YourLogo"></a>
        </div>
    </footer>
    <div id="modal-wrap"></div>

    <main layout:fragment="content">
        <!-- pc contents -->
        <section class="hidden lg:block w-[95%] max-w-[1160px] mx-auto h-full" id="pcSection">
            <div class="flex flex-col items-center justify-center h-full">
                <div class="mb-[3.5vh] text-white text-center">
                    <img src="/images/auth/npass-logo.png" class="w-[345px] mb-[4vh] mx-auto" alt="NPass">
                    <h2 class="text-3xl font-extrabold mb-[2vh]" th:text="#{pc.authenticate.visitor.title}">방문자 로그인</h2>

                    <th:block th:if="${otpMethod == 'EMAIL'}">
                        <p class="text-sm" th:utext="#{pc.authenticate.visitor.message.email}"></p>
                    </th:block>

                    <th:block th:if="${otpMethod == 'SMS'}">
                        <p class="text-sm" th:utext="#{pc.authenticate.visitor.message.mobile}"></p>
                    </th:block>
                </div>

                <form id="authenticateForm">
                    <input type="hidden" name="userType" value="VISITOR">

                    <div class="*:grid *:grid-cols-[232px_128px] *:grid-rows-[40px] *:gap-2 *:mb-[2.2vh]">
                        <div>
                            <input autocomplete="off" name="username" type="text" th:placeholder="#{pc.authenticate.visitor.input.username.placeholder}" class="text-sm rounded-[3px] px-3 disabled:border disabled:border-cornflower-blue-500 disabled:bg-cornflower-blue-200 disabled:placeholder:text-black">
                        </div>

                        <div>
                            <th:block th:if="${otpMethod == 'EMAIL'}">
                                <input autocomplete="off" name="email" type="text" th:placeholder="#{pc.authenticate.visitor.input.email.placeholder}" class="text-sm rounded-[3px] px-3 disabled:border disabled:border-cornflower-blue-500 disabled:bg-cornflower-blue-200 disabled:placeholder:text-black">
                            </th:block>

                            <th:block th:if="${otpMethod == 'SMS'}">
                                <input maxlength="13" oninput="onInputMobile(this);" autocomplete="off" name="mobile" type="text" th:placeholder="#{pc.authenticate.visitor.input.mobile.placeholder}" class="text-sm rounded-[3px] px-3 disabled:border disabled:border-cornflower-blue-500 disabled:bg-cornflower-blue-200 disabled:placeholder:text-black">
                            </th:block>

                            <button id="sendOtpCodeButton" type="button" onclick="sendOtpCode();" class="border border-black bg-black text-white text-sm rounded hover:bg-white hover:text-blue-ribbon-950 hover:border-blue-ribbon-800 transition-all-3ms-ease" th:text="#{pc.authenticate.visitor.button.sendOtp}">인증번호 전송</button>
                        </div>

                        <div id="otpCodeInputArea" class="!hidden">
                            <label class="flex justify-between items-center bg-white px-3 rounded-[3px] border border-cornflower-blue-500">
                                <input autocomplete="off" maxlength="6" type="text" name="password" th:placeholder="#{pc.authenticate.visitor.input.otp.placeholder}" class="text-sm w-[80%]">
                                <span id="otpTimer" class="text-xs"></span>
                            </label>

                            <button onclick="authenticate();" type="button" class="border border-black bg-black text-white text-sm rounded hover:bg-white hover:text-blue-ribbon-950 hover:border-blue-ribbon-800 transition-all-3ms-ease" th:text="#{pc.authenticate.visitor.button.login}">확 인</button>
                        </div>
                    </div>

                    <div class="text-center"><!--before:rounded-full before:bg-bright-red-800-->
                        <span id="error-msg" class="text-sm text-bright-red-800 mx-auto before:w-[5px] before:h-[5px] before:inline-block before:align-middle before:mr-2"></span>
                    </div>
                </form>

                <div class="flex items-start gap-2 mt-[3vh]">
                    <img src="/images/auth/i-mark.svg" class="w-4 h-auto mt-[6px]" alt="i마크">

                    <th:block th:if="${otpMethod == 'EMAIL'}">
                        <p class="text-sm font-medium text-center leading-[3vh]" th:utext="#{pc.authenticate.visitor.guideMessage.email}"></p>
                    </th:block>

                    <th:block th:if="${otpMethod == 'SMS'}">
                        <p class="text-sm font-medium text-center leading-[3vh]" th:utext="#{pc.authenticate.visitor.guideMessage.mobile}"></p>
                    </th:block>
                </div>
            </div>
        </section>

        <!-- mobile contents -->
        <section class="flex lg:hidden fixed left-1/2 z-10 -translate-x-1/2 flex-col justify-center w-[85%] h-[80%] text-center text-white" id="mobileSection">
            <div>
                <h1 class="mb-[3.7vh]">
                    <img src="/images/auth/login-logo.svg" class="w-[60%] h-auto mx-auto md:w-[51%]" alt="NPass">
                </h1>

                <h2 class="text-[5vw] mb-[2vh] font-bold md:text-[3.7vw]" th:text="#{mobile.authenticate.visitor.title}">방문자 로그인</h2>

                <th:block th:if="${otpMethod == 'EMAIL'}">
                    <p class="text-[4vw] mb-[4.5vh] sm:text-xl md:text-2xl" th:utext="#{mobile.authenticate.visitor.message.email}"></p>
                </th:block>
                <th:block th:if="${otpMethod == 'SMS'}">
                    <p class="text-[4vw] mb-[4.5vh] sm:text-xl md:text-2xl" th:utext="#{mobile.authenticate.visitor.message.mobile}"></p>
                </th:block>

                <p id="error-msg" class="text-apple-blossom-600 text-[4vw] mb-[4.5vh] md:text-[2.8vw]"></p>
            </div>

            <div class="w-full sm:w-[400px] md:w-[525px] mx-auto">
                <form id="authenticateForm">
                    <input type="hidden" name="userType" value="VISITOR">
                    <div class="login visit *:grid *:grid-cols-[59%_36%] *:gap-[5%] *:h-[40px] *:mb-3 *:sm:h-[45px] *:sm:mb-[17px] *:md:h-[65px] *:md:mb-[28px]">
                        <div>
                            <input autocomplete="off" name="username" type="text" th:placeholder="#{mobile.authenticate.visitor.input.username.placeholder}" class="w-full rounded-[5px] text-sm text-black md:rounded-lg px-[10px] md:px-5 md:text-xl">
                        </div>

                        <div>
                            <th:block th:if="${otpMethod == 'EMAIL'}">
                                <input autocomplete="off" name="email" type="text" th:placeholder="#{mobile.authenticate.visitor.input.email.placeholder}" class="w-full rounded-[5px] text-sm text-black md:rounded-lg px-[10px] md:px-5 md:text-xl">
                            </th:block>

                            <th:block th:if="${otpMethod == 'SMS'}">
                                <input maxlength="13" oninput="onInputMobile(this);" autocomplete="off" name="mobile" type="text" th:placeholder="#{mobile.authenticate.visitor.input.mobile.placeholder}" class="w-full rounded-[5px] text-sm text-black md:rounded-lg px-[10px] md:px-5 md:text-xl">
                            </th:block>

                            <button id="sendOtpCodeButton" type="button" onclick="sendOtpCode();" class="bg-persian-blue-900 rounded-[5px] text-pretty text-sm md:rounded-lg md:text-xl" th:text="#{mobile.authenticate.visitor.button.sendOtp}">인증번호 발송</button>
                        </div>

                        <div id="otpCodeInputArea" class="!hidden">
                            <label class="flex justify-between items-center bg-white w-full rounded-[5px] px-[10px] md:px-5">
                                <input maxlength="6" autocomplete="off" name="password" type="text" th:placeholder="#{mobile.authenticate.visitor.input.otp.placeholder}" class="w-[77%] text-black text-sm md:text-xl">
                                <span id="otpTimer" class="text-black text-xs md:text-lg"></span>
                            </label>
                            <button onclick="authenticate();" type="button" class="bg-black rounded-[5px] text-sm md:rounded-lg md:text-xl" th:text="#{mobile.authenticate.visitor.button.login}">확인</button>
                        </div>
                    </div>
                </form>
                <p class="mt-[5vh] bg-[rgba(255,255,255,0.3)] px-[19px] py-[10px] rounded-[5px] md:px-8 md:py-6 md:rounded-lg text-[3.8vw] sm:text-[16px] md:text-xl">
                    <img src="/images/auth/info.svg" class="inline-block mr-1 pb-[3px] h-4 w-auto align-middle md:h-5" alt="information">
                    <span th:text="#{mobile.authenticate.visitor.guideMessage}">무선 네트워크는 신청된 방문자만 사용 가능합니다.</span>
                </p>
            </div>
        </section>

        <!-- pc background -->
        <div class="hidden lg:block fixed top-0 left-0 -z-10 w-full h-full">
            <img src="/images/auth/background-circle-2.svg" alt="background circle" class="absolute top-[-28%] left-[3%]">
            <img src="/images/auth/background-circle-3.svg" alt="background circle" class="absolute bottom-[-11%] right-[7%]">
            <img src="/images/auth/background-circle-4.svg" alt="background circle" class="absolute top-[-5%] right-[11%]">
            <img src="/images/auth/background-circle-1.svg" alt="background circle" class="absolute top-[49%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-auto h-3/4">
        </div>

        <!-- mobile background -->
        <div class="block lg:hidden fixed top-0 left-0 w-full h-full bg-cornflower-blue-400">
            <img src="/images/auth/m-bg-circle-stripe-white-90.svg" alt="background circle" class="absolute top-[13%] left-[8%] w-[30%]">
            <img src="/images/auth/m-bg-circle-stripe-white.svg" alt="background circle" class="absolute top-[7%] left-[2%] w-[20%]">
            <img src="/images/auth/m-bg-circle-stripe-grey.svg" alt="background circle" class="absolute top-[-5%] right-[-6%] w-[39%]">
            <img src="/images/auth/m-bg-circle-stripe-white-oblique.svg" alt="background circle" class="absolute bottom-[-7%] right-[-30%] w-[83%]">
            <img src="/images/auth/m-bg-circle-grey.svg" alt="background circle" class="absolute top-[30%] right-[15%] w-[25%]">
            <img src="/images/auth/m-bg-circle-grey.svg" alt="background circle" class="absolute bottom-[-10%] left-[-13%] w-[42%]">
        </div>
    </main>
</body>
</html>